<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>1 Basic | R Plot Archive</title>
  <meta name="description" content="This is a bookdown for R-based plot archive." />
  <meta name="generator" content="bookdown 0.32 and GitBook 2.6.7" />

  <meta property="og:title" content="1 Basic | R Plot Archive" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is a bookdown for R-based plot archive." />
  <meta name="github-repo" content="thereallda/R-plotArchive" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="1 Basic | R Plot Archive" />
  
  <meta name="twitter:description" content="This is a bookdown for R-based plot archive." />
  

<meta name="author" content="Dean Li" />


<meta name="date" content="2023-01-27" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="scatter.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R Plot Archive</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="1" data-path="basic.html"><a href="basic.html"><i class="fa fa-check"></i><b>1</b> Basic</a>
<ul>
<li class="chapter" data-level="1.1" data-path="basic.html"><a href="basic.html#useful-resources"><i class="fa fa-check"></i><b>1.1</b> Useful resources</a></li>
<li class="chapter" data-level="1.2" data-path="basic.html"><a href="basic.html#prerequisites"><i class="fa fa-check"></i><b>1.2</b> Prerequisites</a></li>
<li class="chapter" data-level="1.3" data-path="basic.html"><a href="basic.html#creating-a-ggplot"><i class="fa fa-check"></i><b>1.3</b> Creating a ggplot</a></li>
<li class="chapter" data-level="1.4" data-path="basic.html"><a href="basic.html#aesthetic-mappings"><i class="fa fa-check"></i><b>1.4</b> Aesthetic mappings</a></li>
<li class="chapter" data-level="1.5" data-path="basic.html"><a href="basic.html#facets"><i class="fa fa-check"></i><b>1.5</b> Facets</a></li>
<li class="chapter" data-level="1.6" data-path="basic.html"><a href="basic.html#geometric-objects"><i class="fa fa-check"></i><b>1.6</b> Geometric objects</a></li>
<li class="chapter" data-level="1.7" data-path="basic.html"><a href="basic.html#statistical-transformation"><i class="fa fa-check"></i><b>1.7</b> Statistical transformation</a></li>
<li class="chapter" data-level="1.8" data-path="basic.html"><a href="basic.html#position-adjustment"><i class="fa fa-check"></i><b>1.8</b> Position adjustment</a></li>
<li class="chapter" data-level="1.9" data-path="basic.html"><a href="basic.html#coordinate-systems"><i class="fa fa-check"></i><b>1.9</b> Coordinate systems</a>
<ul>
<li class="chapter" data-level="1.9.1" data-path="basic.html"><a href="basic.html#coord_flip"><i class="fa fa-check"></i><b>1.9.1</b> coord_flip()</a></li>
<li class="chapter" data-level="1.9.2" data-path="basic.html"><a href="basic.html#coord_polar"><i class="fa fa-check"></i><b>1.9.2</b> coord_polar()</a></li>
</ul></li>
<li class="chapter" data-level="1.10" data-path="basic.html"><a href="basic.html#summary"><i class="fa fa-check"></i><b>1.10</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="scatter.html"><a href="scatter.html"><i class="fa fa-check"></i><b>2</b> Scatter</a>
<ul>
<li class="chapter" data-level="2.1" data-path="scatter.html"><a href="scatter.html#basic-scatter"><i class="fa fa-check"></i><b>2.1</b> basic scatter</a></li>
<li class="chapter" data-level="2.2" data-path="scatter.html"><a href="scatter.html#with-color"><i class="fa fa-check"></i><b>2.2</b> With color</a></li>
<li class="chapter" data-level="2.3" data-path="scatter.html"><a href="scatter.html#with-selected-text-label"><i class="fa fa-check"></i><b>2.3</b> With selected text label</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R Plot Archive</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="basic" class="section level1 hasAnchor" number="1">
<h1><span class="header-section-number">1</span> Basic<a href="basic.html#basic" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In this book, we mainly focus on ggplot2 for generating plots.</p>
<p>Here, we briefly introduce the basic grammar of ggplot2.</p>
<blockquote>
<p>This chapter is mainly adapted from the book <em>R for Data Science</em> (<a href="https://r4ds.had.co.nz/data-visualisation.html" class="uri">https://r4ds.had.co.nz/data-visualisation.html</a>).</p>
</blockquote>
<div id="useful-resources" class="section level2 hasAnchor" number="1.1">
<h2><span class="header-section-number">1.1</span> Useful resources<a href="basic.html#useful-resources" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li><p><a href="https://r4ds.had.co.nz/data-visualisation.html" class="uri">https://r4ds.had.co.nz/data-visualisation.html</a></p></li>
<li><p><a href="https://r-graph-gallery.com/index.html" class="uri">https://r-graph-gallery.com/index.html</a></p></li>
</ul>
</div>
<div id="prerequisites" class="section level2 hasAnchor" number="1.2">
<h2><span class="header-section-number">1.2</span> Prerequisites<a href="basic.html#prerequisites" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Install the ggplot2 and tidyverse package</p>
<blockquote>
<p>patchwork is a very useful package for combining multiple plots</p>
</blockquote>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="basic.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;ggplot2&quot;</span>)</span>
<span id="cb1-2"><a href="basic.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>)</span>
<span id="cb1-3"><a href="basic.html#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;patchwork&quot;</span>)</span></code></pre></div>
<p>Load the packages. We use the <code>mpg</code> dataset for illustration.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="basic.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb2-2"><a href="basic.html#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb2-3"><a href="basic.html#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb2-4"><a href="basic.html#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="basic.html#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;mpg&quot;</span>)</span>
<span id="cb2-6"><a href="basic.html#cb2-6" aria-hidden="true" tabindex="-1"></a>mpg</span></code></pre></div>
<pre><code>## # A tibble: 234 × 11
##    manufacturer model      displ  year   cyl trans drv     cty   hwy fl    class
##    &lt;chr&gt;        &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;
##  1 audi         a4           1.8  1999     4 auto… f        18    29 p     comp…
##  2 audi         a4           1.8  1999     4 manu… f        21    29 p     comp…
##  3 audi         a4           2    2008     4 manu… f        20    31 p     comp…
##  4 audi         a4           2    2008     4 auto… f        21    30 p     comp…
##  5 audi         a4           2.8  1999     6 auto… f        16    26 p     comp…
##  6 audi         a4           2.8  1999     6 manu… f        18    26 p     comp…
##  7 audi         a4           3.1  2008     6 auto… f        18    27 p     comp…
##  8 audi         a4 quattro   1.8  1999     4 manu… 4        18    26 p     comp…
##  9 audi         a4 quattro   1.8  1999     4 auto… 4        16    25 p     comp…
## 10 audi         a4 quattro   2    2008     4 manu… 4        20    28 p     comp…
## # … with 224 more rows</code></pre>
</div>
<div id="creating-a-ggplot" class="section level2 hasAnchor" number="1.3">
<h2><span class="header-section-number">1.3</span> Creating a ggplot<a href="basic.html#creating-a-ggplot" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We use scatter plot (<code>geom_point</code>) to plot <code>displ</code> on x-axis and <code>hwy</code> on y-axis:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="basic.html#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># scatter plot </span></span>
<span id="cb4-2"><a href="basic.html#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co"># hwy：highway miles per gallon</span></span>
<span id="cb4-3"><a href="basic.html#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co"># displ：engine displacement, in litres</span></span>
<span id="cb4-4"><a href="basic.html#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg) <span class="sc">+</span></span>
<span id="cb4-5"><a href="basic.html#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy))</span></code></pre></div>
<p><img src="R-Plot-Archive_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>In ggplot2, we use the <code>data</code> argument to specify the dataset that we want to plot, and assign variables inside <code>aes()</code> function, such as <code>mapping = aes(x = displ, y = hwy)</code> .</p>
<p>To create different plot, we use the <code>geom_*</code> function, such as scatter plot (<code>geom_point</code>) and barplot (<code>geom_bar</code>). We will go thorough the basic plot types in following chapters.</p>
</div>
<div id="aesthetic-mappings" class="section level2 hasAnchor" number="1.4">
<h2><span class="header-section-number">1.4</span> Aesthetic mappings<a href="basic.html#aesthetic-mappings" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Beside plotting the data, we can assign additional features to point, such as color, size and shape. In ggplot, those properties are called as <strong>aesthetic</strong>.</p>
<p><em>For example, you can map the colors of your points to the <code>class</code> variable to reveal the class of each car.</em></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="basic.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg) <span class="sc">+</span> </span>
<span id="cb5-2"><a href="basic.html#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy, <span class="at">color =</span> class))</span></code></pre></div>
<p><img src="R-Plot-Archive_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>Or size of the point</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="basic.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg) <span class="sc">+</span> </span>
<span id="cb6-2"><a href="basic.html#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy, <span class="at">size =</span> class))</span></code></pre></div>
<pre><code>## Warning: Using size for a discrete variable is not advised.</code></pre>
<p><img src="R-Plot-Archive_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>You can also modify the color of the geom, this will <strong>override</strong> the color assign in <code>aes</code>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="basic.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg) <span class="sc">+</span> </span>
<span id="cb8-2"><a href="basic.html#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy, <span class="at">color =</span> class), <span class="at">color =</span> <span class="st">&quot;blue&quot;</span>)</span></code></pre></div>
<p><img src="R-Plot-Archive_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<blockquote>
<p>Common aesthetic arguments includes:</p>
<p><code>color</code>/<code>colour</code> and <code>fill</code>: for mapping the colors. To be noted, scatter plot only accept <code>color/colour</code> for mapping colors.</p>
<p><code>shape</code>: for mapping the shape of the point.</p>
<p><code>alpha</code>: for mapping the transparency.</p>
<p><code>size</code>: for mapping the size.</p>
</blockquote>
</div>
<div id="facets" class="section level2 hasAnchor" number="1.5">
<h2><span class="header-section-number">1.5</span> Facets<a href="basic.html#facets" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>To split the plot into subplots that each display one subset of the data, is facets.</p>
<p>You can use either <code>facet_wrap()</code> or <code>facet_grid()</code> for facet.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="basic.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg) <span class="sc">+</span> </span>
<span id="cb9-2"><a href="basic.html#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy)) <span class="sc">+</span> </span>
<span id="cb9-3"><a href="basic.html#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> class, <span class="at">nrow =</span> <span class="dv">2</span>)</span></code></pre></div>
<p><img src="R-Plot-Archive_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>or the combination of two variables</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="basic.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg) <span class="sc">+</span> </span>
<span id="cb10-2"><a href="basic.html#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy)) <span class="sc">+</span> </span>
<span id="cb10-3"><a href="basic.html#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(drv <span class="sc">~</span> cyl)</span></code></pre></div>
<p><img src="R-Plot-Archive_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
</div>
<div id="geometric-objects" class="section level2 hasAnchor" number="1.6">
<h2><span class="header-section-number">1.6</span> Geometric objects<a href="basic.html#geometric-objects" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We can also combine different geom in one plot</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="basic.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy)) <span class="sc">+</span> </span>
<span id="cb11-2"><a href="basic.html#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb11-3"><a href="basic.html#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>()</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="R-Plot-Archive_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="basic.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># equivalent with the following codes: </span></span>
<span id="cb13-2"><a href="basic.html#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co"># ggplot(data = mpg) + </span></span>
<span id="cb13-3"><a href="basic.html#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_point(mapping = aes(x = displ, y = hwy)) +</span></span>
<span id="cb13-4"><a href="basic.html#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_smooth(mapping = aes(x = displ, y = hwy))</span></span></code></pre></div>
<p>we can specify different aesthetic and different data in each geom</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="basic.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy)) <span class="sc">+</span> </span>
<span id="cb14-2"><a href="basic.html#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">color =</span> class)) <span class="sc">+</span> </span>
<span id="cb14-3"><a href="basic.html#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">data =</span> <span class="fu">filter</span>(mpg, class <span class="sc">==</span> <span class="st">&quot;subcompact&quot;</span>), <span class="at">se =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="R-Plot-Archive_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
</div>
<div id="statistical-transformation" class="section level2 hasAnchor" number="1.7">
<h2><span class="header-section-number">1.7</span> Statistical transformation<a href="basic.html#statistical-transformation" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Next, we use <code>diamonds</code> dataset for illustration.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="basic.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="st">&quot;diamonds&quot;</span>)</span>
<span id="cb16-2"><a href="basic.html#cb16-2" aria-hidden="true" tabindex="-1"></a>diamonds</span></code></pre></div>
<pre><code>## # A tibble: 53,940 × 10
##    carat cut       color clarity depth table price     x     y     z
##    &lt;dbl&gt; &lt;ord&gt;     &lt;ord&gt; &lt;ord&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1  0.23 Ideal     E     SI2      61.5    55   326  3.95  3.98  2.43
##  2  0.21 Premium   E     SI1      59.8    61   326  3.89  3.84  2.31
##  3  0.23 Good      E     VS1      56.9    65   327  4.05  4.07  2.31
##  4  0.29 Premium   I     VS2      62.4    58   334  4.2   4.23  2.63
##  5  0.31 Good      J     SI2      63.3    58   335  4.34  4.35  2.75
##  6  0.24 Very Good J     VVS2     62.8    57   336  3.94  3.96  2.48
##  7  0.24 Very Good I     VVS1     62.3    57   336  3.95  3.98  2.47
##  8  0.26 Very Good H     SI1      61.9    55   337  4.07  4.11  2.53
##  9  0.22 Fair      E     VS2      65.1    61   337  3.87  3.78  2.49
## 10  0.23 Very Good H     VS1      59.4    61   338  4     4.05  2.39
## # … with 53,930 more rows</code></pre>
<p>ggplot2 contains lots of useful statistical transformation for visualization. For example, if we want to count the number of diamonds grouped by cut, we can simply use barplot to do this job.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="basic.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(diamonds<span class="sc">$</span>cut)</span></code></pre></div>
<pre><code>## 
##      Fair      Good Very Good   Premium     Ideal 
##      1610      4906     12082     13791     21551</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="basic.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> diamonds) <span class="sc">+</span></span>
<span id="cb20-2"><a href="basic.html#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> cut), <span class="at">stat =</span> <span class="st">&quot;count&quot;</span>)</span></code></pre></div>
<p><img src="R-Plot-Archive_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="basic.html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># equals to:</span></span>
<span id="cb21-2"><a href="basic.html#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="co"># ggplot(data = diamonds) + </span></span>
<span id="cb21-3"><a href="basic.html#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="co">#   stat_count(mapping = aes(x = cut))</span></span></code></pre></div>
<p>In <code>count</code> mode, <code>geom_bar</code> can group the variables by <code>x</code> and count the frequency of each member.</p>
<p>Also, you may be interested with other statistics</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="basic.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> diamonds) <span class="sc">+</span> </span>
<span id="cb22-2"><a href="basic.html#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(</span>
<span id="cb22-3"><a href="basic.html#cb22-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> cut, <span class="at">y =</span> depth),</span>
<span id="cb22-4"><a href="basic.html#cb22-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun.min =</span> min,</span>
<span id="cb22-5"><a href="basic.html#cb22-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun.max =</span> max,</span>
<span id="cb22-6"><a href="basic.html#cb22-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun =</span> median</span>
<span id="cb22-7"><a href="basic.html#cb22-7" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="R-Plot-Archive_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
</div>
<div id="position-adjustment" class="section level2 hasAnchor" number="1.8">
<h2><span class="header-section-number">1.8</span> Position adjustment<a href="basic.html#position-adjustment" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The color of barplot can be assigned with <code>color</code> and <code>fill</code></p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="basic.html#cb23-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> diamonds) <span class="sc">+</span> </span>
<span id="cb23-2"><a href="basic.html#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> cut, <span class="at">colour =</span> cut))</span>
<span id="cb23-3"><a href="basic.html#cb23-3" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> diamonds) <span class="sc">+</span> </span>
<span id="cb23-4"><a href="basic.html#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> cut, <span class="at">fill =</span> cut))</span>
<span id="cb23-5"><a href="basic.html#cb23-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-6"><a href="basic.html#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="co"># patchwork for combining plots</span></span>
<span id="cb23-7"><a href="basic.html#cb23-7" aria-hidden="true" tabindex="-1"></a>p1 <span class="sc">+</span> p2</span></code></pre></div>
<p><img src="R-Plot-Archive_files/figure-html/unnamed-chunk-14-1.png" width="960" /></p>
<p>Beside, color can be grouping variable for displaying different property.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="basic.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> diamonds) <span class="sc">+</span> </span>
<span id="cb24-2"><a href="basic.html#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> cut, <span class="at">fill =</span> clarity), <span class="at">position=</span><span class="st">&#39;identity&#39;</span>)</span></code></pre></div>
<p><img src="R-Plot-Archive_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<p>Each layer of the barplot represents the number of diamonds with different clarity.</p>
<p><code>position</code> have three options: <code>"identity"</code>, <code>"dodge"</code> or <code>"fill"</code>.</p>
<ul>
<li><p><code>position = "fill"</code></p>
<p>Show the proportions of each group</p></li>
</ul>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="basic.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> diamonds) <span class="sc">+</span> </span>
<span id="cb25-2"><a href="basic.html#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> cut, <span class="at">fill =</span> clarity), <span class="at">position =</span> <span class="st">&quot;fill&quot;</span>)</span></code></pre></div>
<p><img src="R-Plot-Archive_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
<ul>
<li><p><code>position = "dodge"</code></p>
<p>Place overlapping objects beside one another</p></li>
</ul>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="basic.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> diamonds) <span class="sc">+</span> </span>
<span id="cb26-2"><a href="basic.html#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> cut, <span class="at">fill =</span> clarity), <span class="at">position =</span> <span class="st">&quot;dodge&quot;</span>)</span></code></pre></div>
<p><img src="R-Plot-Archive_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
</div>
<div id="coordinate-systems" class="section level2 hasAnchor" number="1.9">
<h2><span class="header-section-number">1.9</span> Coordinate systems<a href="basic.html#coordinate-systems" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="coord_flip" class="section level3 hasAnchor" number="1.9.1">
<h3><span class="header-section-number">1.9.1</span> coord_flip()<a href="basic.html#coord_flip" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>coord_flip()</code> switches the x and y axes.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="basic.html#cb27-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> mpg, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> class, <span class="at">y =</span> hwy)) <span class="sc">+</span> </span>
<span id="cb27-2"><a href="basic.html#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span>
<span id="cb27-3"><a href="basic.html#cb27-3" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> mpg, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> class, <span class="at">y =</span> hwy)) <span class="sc">+</span> </span>
<span id="cb27-4"><a href="basic.html#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb27-5"><a href="basic.html#cb27-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span>
<span id="cb27-6"><a href="basic.html#cb27-6" aria-hidden="true" tabindex="-1"></a>p1 <span class="sc">+</span> p2</span></code></pre></div>
<p><img src="R-Plot-Archive_files/figure-html/unnamed-chunk-18-1.png" width="768" /></p>
</div>
<div id="coord_polar" class="section level3 hasAnchor" number="1.9.2">
<h3><span class="header-section-number">1.9.2</span> coord_polar()<a href="basic.html#coord_polar" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>coord_polar()</code> uses polar coordinates.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="basic.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> diamonds) <span class="sc">+</span> </span>
<span id="cb28-2"><a href="basic.html#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(</span>
<span id="cb28-3"><a href="basic.html#cb28-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> cut, <span class="at">fill =</span> cut), </span>
<span id="cb28-4"><a href="basic.html#cb28-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span>,</span>
<span id="cb28-5"><a href="basic.html#cb28-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">width =</span> <span class="dv">1</span></span>
<span id="cb28-6"><a href="basic.html#cb28-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> </span>
<span id="cb28-7"><a href="basic.html#cb28-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">aspect.ratio =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb28-8"><a href="basic.html#cb28-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb28-9"><a href="basic.html#cb28-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_polar</span>()</span></code></pre></div>
<p><img src="R-Plot-Archive_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
</div>
</div>
<div id="summary" class="section level2 hasAnchor" number="1.10">
<h2><span class="header-section-number">1.10</span> Summary<a href="basic.html#summary" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In all, ggplot2 can be summarized as the following code template:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="basic.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> <span class="sc">&lt;</span>DATA<span class="sc">&gt;</span>) <span class="sc">+</span> </span>
<span id="cb29-2"><a href="basic.html#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="er">&lt;</span>GEOM_FUNCTION<span class="sc">&gt;</span>(</span>
<span id="cb29-3"><a href="basic.html#cb29-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="sc">&lt;</span>MAPPINGS<span class="sc">&gt;</span>),</span>
<span id="cb29-4"><a href="basic.html#cb29-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">stat =</span> <span class="sc">&lt;</span>STAT<span class="sc">&gt;</span>, </span>
<span id="cb29-5"><a href="basic.html#cb29-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">position =</span> <span class="sc">&lt;</span>POSITION<span class="sc">&gt;</span></span>
<span id="cb29-6"><a href="basic.html#cb29-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb29-7"><a href="basic.html#cb29-7" aria-hidden="true" tabindex="-1"></a>  <span class="er">&lt;</span>COORDINATE_FUNCTION<span class="sc">&gt;</span> <span class="sc">+</span></span>
<span id="cb29-8"><a href="basic.html#cb29-8" aria-hidden="true" tabindex="-1"></a>  <span class="er">&lt;</span>FACET_FUNCTION<span class="sc">&gt;</span></span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="scatter.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

</body>

</html>
